# ÎÎµÎºÎ¹Î½Î¬Î¼Îµ Î±Ï€ÏŒ Ï„Î·Î½ ÎµÏ€Î¯ÏƒÎ·Î¼Î· ÎµÎ¹ÎºÏŒÎ½Î± Ï„Î¿Ï… Node-RED
FROM nodered/node-red:4.0

# Î¤ÏÎ­Ï‡Î¿Ï…Î¼Îµ ÎµÎ³ÎºÎ±Ï„Î±ÏƒÏ„Î¬ÏƒÎµÎ¹Ï‚ Ï‰Ï‚ root
USER root
WORKDIR /data

# Î•Î¾Î±ÏÏ„Î®ÏƒÎµÎ¹Ï‚ Ï€Î±Î»ÎµÏ„ÏÎ½ (worldmap, minio ÎºÎ»Ï€.) â€” caching friendly
COPY package.json /data/package.json
RUN npm install --unsafe-perm --no-update-notifier --no-fund

# Î— ÏÎ¿Î® 
COPY flows.json /data/flows.json

# ğŸ”§ Î£Î—ÎœÎ‘ÎÎ¤Î™ÎšÎŸ: Î´Î¹ÎºÎ±Î¹ÏÎ¼Î±Ï„Î± Î³Î¹Î± Î½Î± Î¼Ï€Î¿ÏÎµÎ¯ Î½Î± Î³ÏÎ¬ÏˆÎµÎ¹ Î¿ Node-RED
RUN chown -R node-red:node-red /data

# Î•Ï€Î¹ÏƒÏ„ÏÎ¿Ï†Î® ÏƒÏ„Î¿Î½ default Ï‡ÏÎ®ÏƒÏ„Î· Ï„Î¿Ï… image
USER node-red
WORKDIR /usr/src/node-red